<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vushop24h - SƒÉn Deal Shopee Gi√° R·∫ª M·ªói Ng√†y</title>
    <meta name="description" content="T·ªïng h·ª£p s·∫£n ph·∫©m Shopee gi√° t·ªët, deal hot m·ªói ng√†y">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .shopee-orange { color: #EE4D2D; }
        .shopee-bg { background-color: #EE4D2D; }
        .shopee-bg-hover { background-color: #d43f25; }
        
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

        @keyframes fade-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-up { animation: fade-up 0.6s ease-out forwards; }
        
        .product-card { transition: all 0.3s ease; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.1); }
        
        /* Skeleton Loading */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #f7f7f7 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
        }
        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.41.0",
    "react/": "https://esm.sh/react@^19.2.4/",
    "react": "https://esm.sh/react@^19.2.4",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.4",
    "vite": "https://esm.sh/vite@^7.3.1"
  }
}
</script>
</head>
<body class="bg-gray-50 text-gray-900">

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white shadow-sm border-b border-gray-100">
        <div class="container mx-auto px-4 py-3 md:py-4 flex flex-col md:flex-row items-center justify-between gap-4">
            <!-- Logo -->
            <div class="flex items-center gap-2 cursor-pointer" onclick="resetView()">
                <div class="w-10 h-10 shopee-bg rounded-xl flex items-center justify-center shadow-lg shadow-orange-100">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                </div>
                <h1 class="text-2xl font-bold tracking-tight text-gray-800">
                    Vu<span class="shopee-orange">shop24h</span>
                </h1>
            </div>

            <!-- Search Bar -->
            <div class="relative w-full md:max-w-xl">
                <input
                    type="text"
                    id="searchInput"
                    placeholder="B·∫°n ƒëang t√¨m deal g√¨ h√¥m nay?..."
                    class="w-full bg-gray-100 text-gray-800 px-5 py-2.5 pr-12 rounded-full focus:outline-none focus:ring-2 focus:ring-orange-200 transition-all border border-transparent focus:bg-white focus:border-orange-100"
                    onkeyup="handleSearch()"
                />
                <div class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
            </div>

            <!-- Action Button -->
            <nav class="hidden md:flex items-center">
                <a href="https://zalo.me/g/qmxsrk045" target="_blank" class="shopee-bg text-white px-6 py-2.5 rounded-full font-bold hover:shopee-bg-hover transition-all shadow-sm text-sm">
                    Gia nh·∫≠p c·ªông ƒë·ªìng
                </a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="hero" class="bg-white py-12 md:py-20 overflow-hidden relative border-b border-gray-50">
        <div class="container mx-auto px-4 text-center relative z-10">
            <div class="inline-block px-4 py-1.5 bg-orange-50 text-[#EE4D2D] text-xs font-bold rounded-full mb-6 animate-fade-up">
                üî• DEAL HOT C·∫¨P NH·∫¨T 24/7
            </div>
            <h2 class="text-4xl md:text-6xl font-extrabold mb-6 animate-fade-up tracking-tight text-gray-900 leading-tight">
                Thi√™n ƒê∆∞·ªùng <span class="shopee-orange">SƒÉn Deal</span><br/>Shopee S·ªë 1 VN
            </h2>
            <p class="text-base md:text-lg mb-10 text-gray-500 max-w-2xl mx-auto leading-relaxed animate-fade-up" style="animation-delay: 0.1s">
                T·ªïng h·ª£p nh·ªØng s·∫£n ph·∫©m gi·∫£m gi√° c·ª±c m·∫°nh, m√£ voucher ƒë·ªôc quy·ªÅn. Mua s·∫Øm th√¥ng minh, ti·∫øt ki·ªám t·ªëi ƒëa c√πng Vushop24h.
            </p>
            <div class="flex flex-col sm:flex-row items-center justify-center gap-4 animate-fade-up" style="animation-delay: 0.2s">
                <button onclick="scrollToProducts()" class="w-full sm:w-auto shopee-bg text-white px-10 py-4 rounded-full font-bold text-lg hover:shopee-bg-hover transition-all shadow-xl shadow-orange-200">
                    Xem s·∫£n ph·∫©m ngay
                </button>
                <a href="https://zalo.me/g/qmxsrk045" target="_blank" class="w-full sm:w-auto bg-white text-gray-700 border border-gray-200 px-10 py-4 rounded-full font-bold text-lg hover:bg-gray-50 transition-all flex items-center justify-center gap-2">
                    Nh√≥m Zalo sƒÉn m√£
                </a>
            </div>
        </div>
    </section>

    <!-- Category Nav -->
    <nav class="bg-white border-b border-gray-100 sticky top-[132px] md:top-[76px] z-40">
        <div class="container mx-auto px-4">
            <div id="categoryContainer" class="flex items-center gap-2 py-4 overflow-x-auto scrollbar-hide">
                <!-- Categories will be injected here -->
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <section id="products" class="py-12 bg-gray-50 min-h-[600px] scroll-mt-20">
        <div class="container mx-auto px-4">
            <div class="mb-10 flex flex-col md:flex-row items-center justify-between gap-4">
                <div class="text-center md:text-left">
                    <h2 id="sectionTitle" class="text-2xl font-bold text-gray-900 flex items-center justify-center md:justify-start gap-3">
                        üöÄ Deal Ngon M·ªõi Nh·∫•t
                    </h2>
                </div>
                <button onclick="loadProductsFromSheet()" class="text-sm font-bold text-[#EE4D2D] bg-orange-50 px-4 py-2 rounded-lg border border-orange-100 hover:bg-orange-100 transition-all flex items-center gap-2">
                    <svg id="refreshIcon" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
                    L√†m m·ªõi
                </button>
            </div>

            <div id="productGrid" class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-8">
                <!-- Loading Skeleton -->
                <div class="skeleton h-80 rounded-2xl"></div>
                <div class="skeleton h-80 rounded-2xl"></div>
                <div class="skeleton h-80 rounded-2xl"></div>
                <div class="skeleton h-80 rounded-2xl"></div>
            </div>

            <div id="noResults" class="hidden text-center py-24 bg-white rounded-3xl shadow-sm border border-gray-100">
                <div class="text-6xl mb-4">üîç</div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m</h3>
                <p class="text-gray-500 px-4">Th·ª≠ t√¨m ki·∫øm v·ªõi t·ª´ kh√≥a kh√°c ho·∫∑c quay l·∫°i xem t·∫•t c·∫£ nh√©.</p>
                <button onclick="resetView()" class="mt-8 shopee-bg text-white px-8 py-3 rounded-full font-bold hover:shopee-bg-hover transition-all shadow-lg">
                    L√†m m·ªõi danh s√°ch
                </button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 py-16">
        <div class="container mx-auto px-4 text-center md:text-left">
            <div class="grid md:grid-cols-3 gap-12 mb-12">
                <div>
                    <h3 class="text-white text-2xl font-bold mb-6">Vu<span class="shopee-orange">shop24h</span></h3>
                    <p class="text-sm leading-relaxed opacity-80">
                        Vushop24h l√† n·ªÅn t·∫£ng t·ªïng h·ª£p deal v√† voucher Shopee ch·∫•t l∆∞·ª£ng cao. Ch√∫ng t√¥i gi√∫p b·∫°n mua s·∫Øm th√¥ng th√°i h∆°n m·ªói ng√†y.
                    </p>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-6 uppercase text-xs tracking-widest">Li√™n K·∫øt Nhanh</h4>
                    <ul class="space-y-4 text-sm font-medium">
                        <li><a href="#" class="hover:shopee-orange transition-colors">Trang ch·ªß</a></li>
                        <li><a href="https://zalo.me/g/qmxsrk045" target="_blank" class="hover:shopee-orange transition-colors">Nh√≥m Zalo Affiliate</a></li>
                        <li><a href="https://www.facebook.com/hoangvu.bot/" target="_blank" class="hover:shopee-orange transition-colors">Fanpage h·ªó tr·ª£</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-6 uppercase text-xs tracking-widest">H·ªó Tr·ª£ Kh√°ch H√†ng</h4>
                    <p class="text-sm mb-2 opacity-80">Zalo/Hotline: 0949 731 236</p>
                    <p class="text-sm opacity-80">Admin: Ho√†ng V≈© AI</p>
                </div>
            </div>
            <div class="border-t border-gray-800 pt-8 text-center text-xs text-gray-500 font-medium">
                <p>¬© 2024 VUSHOP24H - H·ªÜ TH·ªêNG SƒÇN DEAL T·ª∞ ƒê·ªòNG. T·∫§T C·∫¢ QUY·ªÄN ƒê∆Ø·ª¢C B·∫¢O L∆ØU.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts Logic -->
    <script>
        const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQhoGPagP_GAX59ciC3fEc2a2Ol1_Brf8jZIl4BRW0pS46Bef2rf2hM5NBCFMumAP2ivjqmkIV8hjbf/pub?gid=0&single=true&output=csv";
        const DEFAULT_IMAGE = "https://placehold.co/400x400?text=Vushop24h";

        const categories = [
            { id: 'all', name: '‚ú® T·∫•t c·∫£ deal' },
            { id: 'banchaynhat', name: 'üî• B√°n ch·∫°y nh·∫•t' },
            { id: 'dienthoai', name: 'üì± ƒêi·ªán tho·∫°i' },
            { id: 'phukiendienthoai', name: 'üéß Ph·ª• ki·ªán' },
            { id: 'sacdep', name: 'üíÑ S·∫Øc ƒë·∫πp' },
            { id: 'thoitrangnam', name: 'üëî Th·ªùi trang Nam' },
            { id: 'thoitrangnu', name: 'üëó Th·ªùi trang N·ªØ' }
        ];

        let products = [];
        let activeCategory = 'all';
        let searchQuery = '';
        let isLoading = true;

        function normalizeCategory(str) {
            if (!str) return "all";
            let normalized = str.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/[ƒëƒê]/g, 'd').replace(/[^a-z0-9]/g, '');
            if (normalized.includes('phukien')) return 'phukiendienthoai';
            if (normalized.includes('banchay')) return 'banchaynhat';
            if (normalized.includes('dienthoai')) return 'dienthoai';
            if (normalized.includes('sacdep')) return 'sacdep';
            if (normalized.includes('thoitrangnam')) return 'thoitrangnam';
            if (normalized.includes('thoitrangnu')) return 'thoitrangnu';
            return normalized;
        }

        // H√†m ph√¢n t√≠ch d√≤ng CSV ch√≠nh x√°c (X·ª≠ l√Ω d·∫•u ph·∫©y b√™n trong d·∫•u ngo·∫∑c k√©p)
        function parseCSVRow(rowText) {
            const result = [];
            let current = "";
            let inQuotes = false;
            
            for (let i = 0; i < rowText.length; i++) {
                const char = rowText[i];
                if (char === '"') {
                    inQuotes = !inQuotes;
                } else if (char === ',' && !inQuotes) {
                    result.push(current.trim());
                    current = "";
                } else {
                    current += char;
                }
            }
            result.push(current.trim());
            // Lo·∫°i b·ªè d·∫•u ngo·∫∑c k√©p ·ªü hai ƒë·∫ßu v√† x·ª≠ l√Ω d·∫•u ngo·∫∑c k√©p k√©p
            return result.map(val => val.replace(/^"|"$/g, '').replace(/""/g, '"'));
        }

        function parseCSV(csvText) {
            const lines = csvText.split(/\r?\n/);
            const result = [];
            
            // B·ªè qua d√≤ng ti√™u ƒë·ªÅ (i=1)
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                const cleanRow = parseCSVRow(line);

                if (cleanRow.length >= 6) {
                    result.push({
                        id: `sheet-${i}-${Date.now()}`,
                        name: cleanRow[0] || "S·∫£n ph·∫©m Shopee",
                        image: cleanRow[1] || DEFAULT_IMAGE,
                        oldPrice: cleanRow[2] || "0",
                        newPrice: cleanRow[3] || "0",
                        badge: cleanRow[4] || "Deal Hot",
                        link: cleanRow[5] || "https://shopee.vn",
                        category: normalizeCategory(cleanRow[6]),
                        rating: 4.5 + (Math.random() * 0.5),
                        soldCount: Math.floor(Math.random() * 500 + 50).toString() + "+"
                    });
                }
            }
            return result;
        }

        async function loadProductsFromSheet() {
            isLoading = true;
            const grid = document.getElementById('productGrid');
            const refreshIcon = document.getElementById('refreshIcon');
            
            refreshIcon.classList.add('animate-spin');
            grid.innerHTML = `<div class="skeleton h-80 rounded-2xl"></div>`.repeat(4);

            try {
                const response = await fetch(`${SHEET_URL}&t=${new Date().getTime()}`);
                const csvText = await response.text();
                products = parseCSV(csvText);
            } catch (error) {
                console.error("L·ªói t·∫£i Sheet:", error);
                grid.innerHTML = `<div class="col-span-full text-center py-10 text-red-500 font-bold">L·ªói k·∫øt n·ªëi d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i sau!</div>`;
            } finally {
                isLoading = false;
                refreshIcon.classList.remove('animate-spin');
                renderProducts();
            }
        }

        function renderCategories() {
            const container = document.getElementById('categoryContainer');
            container.innerHTML = categories.map(cat => `
                <button
                    onclick="setActiveCategory('${cat.id}')"
                    class="whitespace-nowrap px-6 py-2.5 rounded-full text-sm font-bold transition-all ${activeCategory === cat.id ? 'shopee-bg text-white shadow-lg' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}"
                >
                    ${cat.name}
                </button>
            `).join('');
        }

        function renderProducts() {
            const grid = document.getElementById('productGrid');
            const noResults = document.getElementById('noResults');
            const hero = document.getElementById('hero');

            const filtered = products.filter(p => {
                const matchesCat = activeCategory === 'all' || p.category === activeCategory;
                const matchesSearch = p.name.toLowerCase().includes(searchQuery.toLowerCase());
                return matchesCat && matchesSearch;
            });

            document.getElementById('sectionTitle').innerHTML = searchQuery 
                ? `üîç K·∫øt qu·∫£ cho: <span class="shopee-orange">"${searchQuery}"</span>` 
                : (activeCategory === 'all' ? 'üöÄ Deal Ngon M·ªõi Nh·∫•t' : `üìã ${categories.find(c => c.id === activeCategory).name}`);

            hero.style.display = (searchQuery === '' && activeCategory === 'all') ? 'block' : 'none';

            if (filtered.length === 0 && !isLoading) {
                grid.classList.add('hidden');
                noResults.classList.remove('hidden');
            } else {
                grid.classList.remove('hidden');
                noResults.classList.add('hidden');
                grid.innerHTML = filtered.map(p => {
                    // T√≠nh % gi·∫£m gi√° an to√†n
                    const oldVal = parseInt(p.oldPrice.replace(/\./g,'').replace(/,/g, '')) || 0;
                    const newVal = parseInt(p.newPrice.replace(/\./g,'').replace(/,/g, '')) || 0;
                    const discount = oldVal > newVal ? Math.round((1 - newVal / oldVal) * 100) : 0;
                    
                    return `
                    <div class="product-card group bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden flex flex-col h-full">
                        <div class="relative aspect-square overflow-hidden bg-gray-50">
                            <img src="${p.image}" 
                                 alt="${p.name}" 
                                 onerror="this.src='${DEFAULT_IMAGE}'"
                                 class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" 
                                 loading="lazy" />
                            <div class="absolute top-3 left-3 flex flex-col gap-2">
                                <span class="shopee-bg text-white text-[10px] font-bold px-2.5 py-1 rounded-md shadow-sm uppercase">
                                    ${p.badge}
                                </span>
                            </div>
                            ${discount > 0 ? `<div class="absolute top-3 right-3 bg-yellow-400 text-red-600 text-[10px] font-black px-2 py-1 rounded-md">-${discount}%</div>` : ''}
                        </div>
                        <div class="p-4 flex flex-col flex-grow">
                            <h3 class="text-sm md:text-base font-bold text-gray-800 line-clamp-2 mb-3 group-hover:shopee-orange transition-colors">
                                ${p.name}
                            </h3>
                            <div class="mt-auto">
                                <div class="flex items-center gap-2 mb-4 flex-wrap">
                                    <span class="shopee-orange text-lg font-extrabold leading-none">${p.newPrice}ƒë</span>
                                    <span class="text-[10px] text-gray-400 line-through">${p.oldPrice}ƒë</span>
                                </div>
                                <a href="${p.link}" target="_blank" class="block w-full text-center shopee-bg hover:shopee-bg-hover text-white py-3 rounded-xl font-bold text-sm transition-all shadow-md shadow-orange-100 uppercase tracking-wide">
                                    SƒÉn Deal Ngay
                                </a>
                                <div class="mt-3 flex items-center justify-between text-[10px] text-gray-500 font-medium">
                                    <span class="flex items-center gap-1 text-orange-500">‚≠ê ${p.rating.toFixed(1)}</span>
                                    <span>ƒê√£ b√°n ${p.soldCount}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `}).join('');
            }
        }

        function setActiveCategory(id) {
            activeCategory = id;
            renderCategories();
            renderProducts();
            if (id !== 'all') scrollToProducts();
        }

        function handleSearch() {
            searchQuery = document.getElementById('searchInput').value;
            renderProducts();
        }

        function resetView() {
            activeCategory = 'all';
            searchQuery = '';
            document.getElementById('searchInput').value = '';
            renderCategories();
            renderProducts();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function scrollToProducts() {
            document.getElementById('products').scrollIntoView({behavior: 'smooth'});
        }

        window.onload = () => {
            renderCategories();
            loadProductsFromSheet();
        };
    </script>
</body>
</html>
